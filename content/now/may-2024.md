+++
title = "What I am doing now, May 2024"
date = 2021-05-04
template = "markdown-page.html"
+++

See [previous post](@/now/may-2021.md). Time flies: I have joined and left Lazada in the meantime. Right now I am working as AI Scientist @ Shanda.


# Bootstrapping Recommendation Service

The tech stack is simple:
- [pairec from aliyun](https://github.com/alibaba/pairec) for backend service. Not a fan honestly, as we are using maybe less than 5% of the codebase; the remaining 95% just complicate things and slow the team down.
- PostgresDB for offline batch processing/online feature store. A **single** flink job processing app tracking event from a Kafka topic, and appends to a user log table. Everything else live on the DB.
- DBT for managing SQL task and k8s-cronjob for scheduling batch task.

It lacks A LOT OF things, mostly because we are not on Aliyun and have to bring our own implementation:

- config live reloading. Plan to adopt [koanf](https://github.com/knadh/koanf), a lighter version of viper.
- A/B testing. The challenge here is logic locality, which I may write a note on. [Growthbook](https://github.com/growthbook/growthbook) uses feature flag, which may work out. 
- ML model serving. Not a priority right now, because no user == no data == no machine learning. [Open Inference Protocol](https://docs.seldon.io/projects/seldon-core/en/latest/reference/apis/v2-protocol.html) seems exactly what we need.

# Getting Into Go

The transition from Python feels quite natural, as I was comfortable with TypeDict, pydantic model and type annotation anyway. The aha moment for me, was treating golang == C with sane syntax + async runtime (gorotine and channel) + interface, instead of another new language. I also like that, Golang treats Makefile and SQL as first class citizen, instead of reinvents the wheel. The only thing I miss from Python are sum type and list comprehension.

This is how many lines of golang I have written since the switch:

```bash
# use this SO answer: https://stackoverflow.com/a/7010890
added lines: 4968, removed lines: 4345, total lines: 623
```

